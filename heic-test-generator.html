<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEIC File Test Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover { background: #45a049; }
        .warning { background: #ff9800; }
        .warning:hover { background: #e68900; }
        input[type="file"] { margin: 10px 0; }
        #output {
            margin-top: 20px;
            padding: 10px;
            background: #333;
            border-radius: 5px;
            min-height: 50px;
        }
    </style>
</head>
<body>
    <h1>üß™ HEIC File Test Generator</h1>
    <p>Create fake HEIC files to test your converter's detection system.</p>

    <div class="test-section">
        <h3>üìÅ Create Fake HEIC Files</h3>
        <p>These are regular images renamed with .heic extension to test detection:</p>
        <button onclick="createFakeHEIC('single')">Create Single HEIC File</button>
        <button onclick="createFakeHEIC('multiple')">Create 3 HEIC Files</button>
        <button onclick="createFakeHEIC('mixed')">Create Mixed Batch (2 JPEG + 2 HEIC)</button>
    </div>

    <div class="test-section">
        <h3>üì§ Upload Real Images to Convert to Fake HEIC</h3>
        <p>Upload your own images and download them as .heic files for testing:</p>
        <input type="file" id="realImages" multiple accept="image/*">
        <button onclick="convertToFakeHEIC()">Convert to Fake HEIC Files</button>
    </div>

    <div class="test-section">
        <h3>üîó Online HEIC Samples</h3>
        <p>You can also download real HEIC files from:</p>
        <ul>
            <li><a href="https://sample-videos.com/" target="_blank" style="color: #4CAF50;">Sample-Videos.com</a> - Various formats including HEIC</li>
            <li><a href="https://file-examples.com/" target="_blank" style="color: #4CAF50;">File-Examples.com</a> - Test files in many formats</li>
            <li><strong>GitHub:</strong> Search "HEIC sample files" for repositories with test images</li>
            <li><strong>iPhone Users:</strong> Take a photo and AirDrop it to your computer</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>‚ö° Quick Test Steps</h3>
        <ol>
            <li>Click "Create Single HEIC File" above</li>
            <li>Go to your image converter</li>
            <li>Try to upload the .heic file</li>
            <li>Should see the orange guidance box appear! üì±</li>
            <li>Try "Create Mixed Batch" to test multiple file handling</li>
        </ol>
    </div>

    <div id="output"></div>

    <script>
        const output = document.getElementById('output');
        
        function log(message) {
            output.innerHTML += message + '<br>';
            output.scrollTop = output.scrollHeight;
        }

        function createFakeHEIC(type) {
            switch(type) {
                case 'single':
                    generateFakeHEIC('test_iphone_photo.heic', 1920, 1080);
                    log('‚úÖ Created: test_iphone_photo.heic');
                    break;
                case 'multiple':
                    generateFakeHEIC('IMG_001.heic', 2048, 1536);
                    generateFakeHEIC('IMG_002.heic', 1920, 1080);
                    generateFakeHEIC('IMG_003.heif', 3024, 4032);
                    log('‚úÖ Created: IMG_001.heic, IMG_002.heic, IMG_003.heif');
                    break;
                case 'mixed':
                    generateFakeHEIC('photo1.heic', 2048, 1536);
                    generateFakeHEIC('photo2.heif', 1920, 1080);
                    generateRegularImage('photo3.jpg', 1024, 768, 'jpeg');
                    generateRegularImage('photo4.png', 800, 600, 'png');
                    log('‚úÖ Created mixed batch: 2 HEIC + 2 regular images');
                    break;
            }
        }

        function generateFakeHEIC(filename, width, height) {
            const canvas = document.createElement('canvas');
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            
            // Create iPhone-like photo
            const gradient = ctx.createLinearGradient(0, 0, width, height);
            gradient.addColorStop(0, '#4A90E2');
            gradient.addColorStop(0.5, '#7ED321');
            gradient.addColorStop(1, '#F5A623');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            
            // Add "iPhone Photo" text
            ctx.fillStyle = 'white';
            ctx.font = `${Math.max(24, width / 40)}px Arial`;
            ctx.fillText('üì± Fake iPhone HEIC Photo', 50, 100);
            ctx.fillText(`${width}√ó${height}`, 50, 150);
            ctx.fillText('Created for testing converter', 50, 200);
            ctx.fillText(new Date().toISOString(), 50, 250);
            
            // Convert to blob but save with .heic extension
            canvas.toBlob(blob => {
                // Create a new blob with the original content but we'll download it as .heic
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename; // This will have .heic extension
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 'image/png', 1.0); // Create as PNG but name as .heic for testing
        }

        function generateRegularImage(filename, width, height, format) {
            const canvas = document.createElement('canvas');
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');
            
            // Different pattern for regular images
            ctx.fillStyle = '#2C3E50';
            ctx.fillRect(0, 0, width, height);
            
            ctx.fillStyle = '#ECF0F1';
            ctx.font = `${Math.max(16, width / 50)}px Arial`;
            ctx.fillText(`Regular ${format.toUpperCase()} Image`, 30, 60);
            ctx.fillText(`${width}√ó${height}`, 30, 90);
            
            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, `image/${format}`, 0.9);
        }

        function convertToFakeHEIC() {
            const fileInput = document.getElementById('realImages');
            const files = fileInput.files;
            
            if (files.length === 0) {
                log('‚ö†Ô∏è Please select some images first');
                return;
            }
            
            log(`üîÑ Converting ${files.length} images to fake HEIC files...`);
            
            Array.from(files).forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Create blob from the original file but download with .heic extension
                    const originalName = file.name.replace(/\.[^/.]+$/, '');
                    const heicName = `${originalName}.heic`;
                    
                    // Create blob with original data
                    const blob = new Blob([e.target.result], { type: file.type });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = heicName;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    log(`‚úÖ Downloaded: ${heicName}`);
                };
                reader.readAsArrayBuffer(file);
            });
        }

        // Initialize
        log('üß™ HEIC Test File Generator Ready!');
        log('Click the buttons above to create test files for your converter.');
        log('');
        log('üí° Tip: These are regular images with .heic extensions - perfect for testing your detection logic!');
    </script>
</body>
</html>